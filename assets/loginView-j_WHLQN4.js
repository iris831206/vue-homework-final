import{r as n,c as f,w as u,v as c,a as s,b as _,d as v,e as w,o as g,f as C,u as h}from"./index-7vbtwaSz.js";import{a as x,S as a}from"./sweetalert2.all-3AyHTPfb.js";const b={class:"formControls"},k=s("h2",{class:"formControls_txt"},"最實用的線上代辦事項服務",-1),y=s("label",{class:"formControls_label",for:"email"},"Email",-1),V=s("label",{class:"formControls_label",for:"pwd"},"密碼",-1),q="https://todolist-api.hexschool.io",T={__name:"loginView",setup(S){const m=h(),t=n({email:"",password:""}),o=n(""),i=n([]),p=async()=>{const r=new Date;r.setDate(r.getDate()+1);try{const e=await x.post(`${q}/users/sign_in`,t.value);document.cookie=`myToken=${e.data.token}; expires=${r.toUTCString()}`,o.value="登入成功",a.fire({icon:"success",title:o.value,showConfirmButton:!1,timer:1500}),m.push("/todolist")}catch(e){console.log(e),e.response.request.status===404?(o.value="登入失敗: 此用戶不存在",a.fire({icon:"error",title:o.value})):e.response.request.status===400?(o.value="登入失敗: 未正確填寫欄位",i.value=e.response.data.message,a.fire({icon:"error",title:o.value,text:i.value.join("｜")})):e.response.request.status===401?(o.value="登入失敗: 密碼輸入錯誤",a.fire({icon:"error",title:o.value})):(o.value="登入失敗: "+e.message,a.fire({icon:"error",title:o.value}))}};return(r,e)=>{const d=w("RouterLink");return g(),f("form",b,[k,y,u(s("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>t.value.email=l),class:"formControls_input",type:"text",id:"email",name:"email",placeholder:"請輸入 email",required:""},null,512),[[c,t.value.email]]),V,u(s("input",{"onUpdate:modelValue":e[1]||(e[1]=l=>t.value.password=l),class:"formControls_input",type:"password",name:"pwd",id:"pwd",placeholder:"請輸入密碼",required:""},null,512),[[c,t.value.password]]),s("input",{class:"formControls_btnSubmit",type:"button",value:"登入",onClick:p}),_(d,{to:"/signup",class:"formControls_btnLink"},{default:v(()=>[C("註冊帳號")]),_:1})])}}};export{T as default};
